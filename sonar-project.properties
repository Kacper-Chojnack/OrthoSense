# SonarCloud Project Configuration
sonar.projectKey=Kacper-Chojnack_OrthoSense
sonar.projectName=OrthoSense
sonar.projectVersion=1.0.0
sonar.organization=kacper-chojnack-1

# Source and test paths (both backend and frontend)
sonar.sources=backend/app,lib
sonar.tests=backend/tests,test
sonar.python.version=3.13

# Set Python source root for proper test file resolution
sonar.python.src.root=backend

# Language detection hints
sonar.language=

# Exclude files
sonar.exclusions=\
  **/__pycache__/**,\
  **/.pytest_cache/**,\
  **/migrations/**,\
  **/alembic/**,\
  **/*.pyc,\
  **/*.g.dart,\
  **/*.freezed.dart,\
  **/generated/**,\
  **/build/**,\
  **/.dart_tool/**,\
  **/ios/**,\
  **/android/**,\
  **/macos/**,\
  **/web/**,\
  **/windows/**,\
  **/linux/**,\
  **/terraform/**,\
  **/scripts/**,\
  **/docs/**,\
  **/config/**,\
  **/assets/**,\
  **/venv/**,\
  **/.venv/**,\
  **/node_modules/**

# Test exclusions
sonar.test.exclusions=backend/tests/**,test/**

# Exclude test files from security hotspot analysis (test data is not real secrets)
sonar.security.exclusions=**/tests/**,**/test/**,**/*_test.py,**/*_test.dart

# Coverage reports
sonar.python.coverage.reportPaths=backend/coverage.xml
sonar.python.xunit.reportPath=backend/test-results.xml
sonar.python.xunit.skipDetails=true

# Flutter/Dart coverage (SonarCloud uses generic coverage format)
sonar.coverageReportPaths=coverage/coverage.xml

# External linters integration
sonar.python.ruff.reportPaths=backend/ruff-report.json
sonar.python.mypy.reportPaths=backend/mypy-report.xml

# Quality Gate thresholds - ENABLED to enforce >80% coverage on new code
# This will fail CI if quality gate conditions are not met
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300

# Skip duplications on test files
sonar.cpd.exclusions=**/tests/**,**/test/**,**/*_test.dart,**/*_test.py

# New code definition - analyze only new code for quality gate (focus on new changes)
sonar.newCode.referenceBranch=main
sonar.leak.period=previous_version

# Ignore missing coverage reports (allow analysis to proceed without coverage data)
# Excluding UI components (screens, widgets) and infrastructure that requires complex mocking
sonar.coverage.exclusions=\
  **/__pycache__/**,\
  **/tests/**,\
  **/test/**,\
  **/*_test.dart,\
  **/*_test.py,\
  **/generated/**,\
  **/*.g.dart,\
  **/*.freezed.dart,\
  **/migrations/**,\
  lib/main.dart,\
  **/widgets/**,\
  **/screens/**,\
  **/core/providers/**,\
  **/core/database/**,\
  **/core/services/**,\
  **/infrastructure/networking/**,\
  **/*.config.dart,\
  **/l10n/**,\
  **/theme/**

# Additional analysis parameters
sonar.sourceEncoding=UTF-8
sonar.verbose=false

# Disable C/C++/Objective-C analysis (iOS Pods contain these files)
sonar.c.file.suffixes=-
sonar.cpp.file.suffixes=-
sonar.objc.file.suffixes=-
